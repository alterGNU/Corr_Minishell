# ============================================================================================================
# EXPORT and UNSET builtins tests
# ============================================================================================================
echo "TESTS 0:EXPORT AND UNSET UNVALID IDENTIFIER"
empty_1=""
empty_2="            "
empty_3="			"
empty_4="	   		   "
export empty_1
echo $?
export empty_2
echo $?
export empty_3
echo $?
export empty_4
echo $?
echo before unset empty_0=$empty_0, empty_1=$empty_1, empty_2=$empty_2, empty_3=$empty_3, empty_4=$empty_4.
unset empty_0 empty_1 empty_2 empty_3 empty_4
echo after unset empty_0=$empty_0, empty_1=$empty_1, empty_2=$empty_2, empty_3=$empty_3, empty_4=$empty_4.
export empty_0 empty_1 empty_2 empty_3 empty_3 empty_4
echo $?
echo before unset empty_0=$empty_0, empty_1=$empty_1, empty_2=$empty_2, empty_3=$empty_3, empty_4=$empty_4.
unset empty_0 empty_1 empty_2 empty_3 empty_4
echo after unset empty_0=$empty_0, empty_1=$empty_1, empty_2=$empty_2, empty_3=$empty_3, empty_4=$empty_4.
export ""
echo $?
export "                 "
echo $?
export v1=valid1 to.to=tata v2=valid2
echo $? v1=$v1, v2=$v2.
export 'u'=tata v3=valid3
echo $? v3=$v3.
export 1v=tata
echo $? v3=$v3.
unset v1 12 v2
echo $? v1=$v1, v2=$v2.
unset 1not.valid
echo $?
unset v3
echo $? v1=$v1, v2=$v2, v3=$v3.
echo
# ============================================================================================================
echo "TESTS 1:EXPORT WITHOUT ARG"
export
echo $?
echo
# ============================================================================================================
echo "TESTS 2:EXPORT and LOCAL VAR AFFECTATION"
local_1=a1 local_2=a2 local_3="super=chouette"
export toto=tata tata=titi titi=tutu tutu=tete 
echo I am PARENT: and for me local_1=$local_1, local_2=$local_2, toto=$toto, tata=$tata, titi=$titi, tutu=tete.
export $local_3
echo $? super=$super, local_3=$local_3.
unset local_3
echo $? super=$super, local_3=$local_3.
unset super
echo $? super=$super, local_3=$local_3.
echo
# ============================================================================================================
echo "TESTS 3:UNSET for LOCAL VAR AND EXPORTED VAR-ENV"
unset local_1 tata titi
echo I am PARENT: and for me local_1=$local_1, local_2=$local_2, toto=$toto, tata=$tata, titi=$titi, tutu=tete.
echo
# ============================================================================================================
echo "TESTS 4:Check EXPORT & UNSET WORKS FROM PARENT TO CHILD"
echo 'echo I am CHILD and for me local_1=$local_1, local_2=$local_2, toto=$toto, tata=$tata, titi=$titi, tutu=tete.' | bash
echo last bash returned $?.
echo 'echo I am CHILD and for me local_1=$local_1, local_2=$local_2, toto=$toto, tata=$tata, titi=$titi, tutu=tete.' | ./minishell
echo last minishell returned $?.
echo
# ============================================================================================================
echo "TESTS 5:Check EXPORT NOT WORKING FROM CHILD TO PARENT"
echo 'export HERE="export in child" && echo I am CHILD: and for me HERE=$HERE' | bash
echo last bash returned $?.
echo I am PARENT=, and for me HERE=$HERE.
echo 'export HERE="export in child" && echo I am CHILD: and for me HERE=$HERE' | ./minishell
echo last bash returned $?.
echo I am PARENT=, and for me HERE=$HERE.
echo
# ============================================================================================================
echo "TESTS 6:Check UNSET NOT WORKING FROM CHILD TO PARENT"
echo 'loc1=hello loc2=world&&echo I am CHILD: : BEFORE:loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu.&&unset loc1 toto&&echo I am CHILD: : AFTER :loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu.' | bash
echo last bash returned $?.
echo I am PARENT=, and for me loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu..
echo 'loc1=hello loc2=world&&echo I am CHILD: : BEFORE:loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu.&&unset loc1 toto&&echo I am CHILD: : AFTER :loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu.' | ./minishell
echo last bash returned $?.
echo I am PARENT=, and for me loc1=$loc1,loc2=$loc2,toto=$toto,tutu=$tutu..
# ============================================================================================================
echo 
echo "TESTS 7:EXPORT UNKNOWN AND EMPTY VAR AS CMD"
$unknown_var
echo return=[$?]
export v0="" v_0= 
$v_0
echo return=[$?]
$v0
echo return=[$?]
export v1="              "
$v1
echo return=[$?]
export v2="				" v3="	    		    	   "
$v2
echo return=[$?]
$v3
echo return=[$?]
echo before unset v_0=$v_0, v0=$v0, v1=$v1,v2=$v2,v3=$v3.
unset v_0 v0 v1 v2 v3
echo after unset v_0=$v_0, v0=$v0, v1=$v1,v2=$v2,v3=$v3.
# ============================================================================================================
echo 
echo "TESTS 8:EXPORT UNKNOWN AND EMPTY VAR AS CMD"
export v0="	    		    	echo 	   " v1="   	petite		perruche	   "
$v0
echo return=[$?]
$v0 coucou
echo return=[$?]
$v0 coucou $v1
echo return=[$?]
$v1 $v0
echo return=[$?]
$v0$v0
echo return=[$?]
echo before unset v0=$v0, v1=$v1.
unset v0 v1
echo after unset v0=$v0, v1=$v1.
